2022 09 16

리액트로 아코디언 슬라이드 만들어보자.
바닐라 js로는 만들어본 적이 있고, 이걸 리액트로 만들어보고 싶다. 리액트는 dom 선택이 자유롭지 않기 때문에 바닐라 js에 익숙한 나는 꽤 난황을 겪을 거 같다.

1. useRef 사용

여기서 문제를 겪었다. 데이터를 map으로 뿌리고 있어서 그런지 마지막 생성되는 li만 콘솔에 찍혔다. 이래서는 뭘 눌러도 마지막 li만 선택될 것임으로 map을 사용해 li를 만드는 것을 포기.

2. props 사용

클릭하면 state를 사용해 상태변수를 변경시키고자 하였다. 이를 styled-component에 보내어 유동적으로 변경한다.
문제는 역시, 앞의 상황과 똑같이 map으로 li를 뿌리고 있어 모든 li의 height이 늘어났다.

2-1. 개별 className 사용

미리 class를 정의해놓고 속성을 부여해놓는다. 클릭하면 classList 처럼 height이 증가하고 줄어들게 설계해보았으나 이 역시도 실패했다. 개별적으로 className을 부여하는 것까지는 좋았으나 클릭하기도 전에 height 속성이 적용되어 있고, 또 열기와 닫기의 상태변수를 알 수 없었다.

그렇다면 리액트로 아코디언 슬라이드를 만든 사람이 있지 않을까 하여 구글링해보았다.

블로그를 참고(https://code-masterjung.tistory.com/81)하여 다시 1번의 방법으로 시도.

3. useRef 사용 및 map 미사용
   map 사용을 포기했다. 데이터가 많을 때나 수정하기는 용이하지만 지금 상황에서 데이터는 많지 않다.
   따라서 개별적으로 styled-component를 사용해 시도해보았으나 1과 같은 상황에 놓였다. 그렇다면, 근본적인 문제가 무엇인가 생각해보았다. styled-component도 사용 방법은 class와 비슷하다고 생각했는데 혹시 이것 때문은 아니었을까?
   class는 함수를 재사용하기 위해 사용하는 것이니 같은 객체라 보는 것은 아닌가. 해서 다르게 시도해보았으나 실패.
   useRef는 여전히 마지막 li만을 잡고 있었다.

여기서 참고 블로그를 다시 보니, 해당 블로그는 div(내 경우에는 ul)을 사용해서 크기 조절을 하는 것 같았다. 그래서 다시 구글링. index를 사용해서 활용하는 방법이었는데, 블로그를 보다보니 문득, 할 수 있을 거 같아서 내 방식대로 작성했다.

4. e.target 사용
   이번에는 아예 방향을 바꿔 onClick을 사용해 event.target을 잡아보았다. 그리고 성공!
